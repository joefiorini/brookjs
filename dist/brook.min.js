define("brook/dispatcher",["exports"],function(e){function t(e){var t={},n=[];return t.push=function(e){n.forEach(function(t){t(e)})},t.subscribe=function(r){n=n.concat(r),n.length==1&&e(t.push)},t.subscribed=function(e){return n.indexOf(e)>=0},Object.create(t)}e.dispatcher=t}),define("brook/event-stream",["brook/dispatcher","exports"],function(e,t){function r(e){var t={},r;return e=n(e).subscribe,t.onValue=function(t){return e(function(e){return t(e.value)})},t.onError=function(t){return e(function(e){if(e.failed)return t(e.value)})},t.onDone=function(t){return e(function(e){if(e.done)return t()})},Object.create(t)}var n=e.dispatcher;t.eventStream=r}),define("brook/event",["exports"],function(e){function t(e){var t={value:e,done:!1,failed:!1};return Object.create(t)}function n(){var e=t();return e.done=!0,e}function r(e){var n=t(e);return n}function i(e){var n=t(e);return n.failed=!0,n}e.done=n,e.next=r,e.error=i}),define("brook",["brook/dispatcher","brook/event-stream","brook/event","exports"],function(e,t,n,r){var i=e.dispatcher,s=t.eventStream,o=n.next,u=n.done,a=n.error,f={dispatcher:i,stream:s,next:o,done:u,error:a};r["default"]=f});